"0",""
"0","# Check for any episodes with no segments"
"0","episodes_with_segments <- unique(all_segments$episode)"
"0","all_episodes <- unique(snl_airtime_processed$show)"
"0","missing_episodes <- setdiff(all_episodes, episodes_with_segments)"
"0","print(paste(""Episodes with no segments:"", paste(missing_episodes, collapse="", "")))"
"1","[1]"
"1"," ""Episodes with no segments: Weekend Update: Reba McEntire on the 2024 Election - SNL, Bill Burr Hosts Election Week at Saturday Night Live"""
"1","
"
"0","# Create a data frame for grey bars with exactly the same episode names"
"0","episode_bars <- snl_airtime_processed %>%"
"0","  select(show, episode_length_seconds) %>%"
"0","  rename(episode = show)"
"0",""
"0","# Step 2: Create the faceted visualization with debugging - FIXED VERSION"
"0","all_episodes_vis <- ggplot() +"
"0","  # Draw the full episode bar (grey) for all episodes"
"0","  geom_rect("
"0","    data = episode_bars,"
"0","    aes(xmin = 0, xmax = episode_length_seconds, ymin = 0, ymax = 1, group = episode),"
"0","    fill = ""grey90"", color = ""black"", size = 0.3"
"0","  ) +"
"0","  "
"0","  # Add Trump segments with more explicit mapping"
"0","  geom_rect("
"0","    data = filter(all_segments, candidate == ""Trump""),"
"0","    aes(xmin = start, xmax = end, ymin = 0.5, ymax = 1, group = episode),"
"0","    fill = ""red"", color = ""darkred"", alpha = 0.8, size = 0.5"
"0","  ) +"
"0","  "
"0","  # Add Harris segments with more explicit mapping"
"0","  geom_rect("
"0","    data = filter(all_segments, candidate == ""Harris""),"
"0","    aes(xmin = start, xmax = end, ymin = 0, ymax = 0.5, group = episode),"
"0","    fill = ""blue"", color = ""darkblue"", alpha = 0.8, size = 0.5"
"0","  ) +"
"0","  "
"0","  # Add tick marks - keep scales consistent"
"0","  scale_x_continuous("
"0","    breaks = seq(0, max(episode_bars$episode_length_seconds), by = 60),"
"0","    minor_breaks = seq(0, max(episode_bars$episode_length_seconds), by = 15),"
"0","    labels = function(x) sprintf(""%d:%02d"", x %/% 60, x %% 60)"
"0","  ) +"
"0","  "
"0","  # Force a more explicit interaction between facets and data"
"0","  facet_wrap(~ episode, ncol = 1, scales = ""free_x"", drop = FALSE) +"
"0","  "
"0","  # Rest of your code stays the same"
"0","  labs("
"0","    title = ""SNL Airtime Visualization for All Episodes"","
"0","    subtitle = ""Red: Trump Airtime | Blue: Harris Airtime"","
"0","    x = ""Time (minutes:seconds)"","
"0","    y = NULL"
"0","  ) +"
"0","  theme_minimal() +"
"0","  theme("
"0","    strip.text = element_text(face = ""bold"", size = 10),"
"0","    axis.text.y = element_blank(),"
"0","    axis.ticks.y = element_blank(),"
"0","    panel.grid.major.y = element_blank(),"
"0","    panel.grid.minor.y = element_blank(),"
"0","    panel.grid.major.x = element_line(color = ""grey80"", size = 0.3),"
"0","    panel.grid.minor.x = element_line(color = ""grey90"", size = 0.2),"
"0","    plot.title = element_text(face = ""bold"", size = 16, hjust = 0.5),"
"0","    plot.subtitle = element_text(size = 12, hjust = 0.5),"
"0","    axis.text.x = element_text(size = 10, color = ""black"")"
"0","  )"
"0",""
"0","# Step 3: Print the visualization"
"0","print(all_episodes_vis)"
